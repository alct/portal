<!DOCTYPE html>
<html lang="en"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">
  <title>Portal</title>

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    /*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */
    html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}main{display:block}h1{font-size:2em;margin:0.67em 0}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace, monospace;font-size:1em}a{background-color:transparent}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace, monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-0.25em}sup{top:-0.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}[type="button"],[type="reset"],[type="submit"],button{-webkit-appearance:button}[type="button"]::-moz-focus-inner,[type="reset"]::-moz-focus-inner,[type="submit"]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type="button"]:-moz-focusring,[type="reset"]:-moz-focusring,[type="submit"]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:0.35em 0.75em 0.625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type="checkbox"],[type="radio"]{box-sizing:border-box;padding:0}[type="number"]::-webkit-inner-spin-button,[type="number"]::-webkit-outer-spin-button{height:auto}[type="search"]{-webkit-appearance:textfield;outline-offset:-2px}[type="search"]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}template{display:none}[hidden]{display:none}

    *,
    *::before,
    *::after {
      box-sizing: border-box;
    }
    html {
      font-size: 106.25%;
    }
    body {
      font-family: Avenir Next, Avenir, sans-serif;
      line-height: 1.5;
      margin: 0 auto;
      max-width: 48rem;
      padding: 2rem;
    }
    h1, h2, h3, h4, h5, h6 {
      font-weight: normal;
      line-height: 1.2;
    }
    h1 {
      font-size: 2.4rem;
      margin-bottom: 3rem;
    }
    h2 {
      margin-bottom: 0;
    }
    .filter {
      background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"></polygon></svg>') no-repeat .5rem center;
      background-size: 1.1rem 1.1rem;
      border: none;
      border-bottom: 1px solid #ccc;
      padding: .5rem .5rem .5rem 2.1rem;
      width: 100%;
    }
    .item {
      margin: 1rem 0;
      padding: 1rem;
      position: relative;
    }
    .item *:first-child {
      margin-top: 0;
    }
    .item *:last-child {
      margin-bottom: 0;
    }
    .item a {
      text-decoration: none;
      color: inherit;
      outline: none;
    }
    .item a::before {
      border: solid 2px rgba(0, 0, 0, .1);
      border-radius: 3px;
      cursor: pointer;
      content: "";
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      top: 0;
    }
    .item a:hover,
    .item a:focus {
      color: #000;
    }
    .item a:hover::before,
    .item a:focus::before {
      border-color: #000;
    }
    .keywords {
      color: rgba(0, 0, 0, .7);
      font-size: .8rem;
      margin-top: 0;
    }
    .keywords p,
    .keywords ul {
      display: inline-block;
    }
    .keywords ul {
      list-style-type: none;
      margin: 0;
      padding: 0;
    }
    .keywords li {
      display: inline-flex;
      padding: 0 .2rem;
    }
    .hidden {
      display: none;
    }
  </style>
</head>

<body>
<h1>Portal</h1>

<div class="container">

<div class="item">
  <h2><a href="https://en.wikipedia.org">Wikipedia</a></h2>
  <div class="keywords">
    <ul>
      <li>js</li>
      <li>mediawiki</li>
      <li>php</li>
    </ul>
  </div>
  <p class="desc">
    Wikipedia is a multilingual online encyclopedia created and maintained as an
    open collaboration project by a community of volunteer editors using a
    wiki-based editing system.
  </p>
</div>

<div class="item">
  <h2><a href="https://duckduckgo.com">DuckDuckGo</a></h2>
  <div class="keywords">
    <ul>
      <li>ddg</li>
    </ul>
  </div>
  <p class="desc">
    DuckDuckGo is an internet search engine that emphasizes protecting searchers'
    privacy and avoiding the filter bubble of personalized search results.
    DuckDuckGo distinguishes itself from other search engines by not profiling
    its users and by showing all users the same search results for a given
    search term.
  </p>
</div>

<div class="item">
  <h2><a href="https://protonmail.com">ProtonMail</a></h2>
  <div class="keywords">
    <ul>
      <li>pgp</li>
    </ul>
  </div>
  <p class="desc">
    ProtonMail is an end-to-end encrypted email service founded in 2013 at the
    CERN research facility by Andy Yen, Jason Stockman, and Wei Sun.
  </p>
</div>

<div class="item">
  <h2><a href="https://www.jamendo.com">Jamendo</a></h2>
  <p class="desc">
    Jamendo is a Luxembourg-based music website and an open community of
    independent artists and music lovers. A subsidiary of Belgian company Audio
    Valley, and Independent Management Entity (IME) since 2019.
  </p>
</div>

</div>

<script>
function filterItems (filterField, titles) {
  var userInput = filterField.value

  titles.forEach(function (element) {
    var item = element.parentNode.parentNode
    var title = element.textContent.trim()
    var keywords = []
    var desc = []

    item.querySelectorAll('.keywords li').forEach(function (element) {
      keywords.push(element.textContent.trim())
    })

    item.querySelectorAll('.desc').forEach(function (element) {
      desc.push(element.textContent.trim())
    })

    if (filterMatch(userInput, [title, keywords, desc]) || userInput === '') {
      item.classList.remove('hidden')
    } else {
      item.classList.add('hidden')
    }
  })
}

function filterMatch (needle, haystack) {
  var regex = new RegExp(needle, 'i')
  var match = false

  haystack.forEach(function (element) {
    if (regex.test(element)) match = true
  })

  return match
}

window.addEventListener('load', function () {
  var container = document.body.querySelectorAll('.container')[0]
  var titles = document.body.querySelectorAll('.item h2 a')
  var timeout = null

  var node = document.createElement('p')
  node.innerHTML = '<input type="text" placeholder="Filter items with RegEx (Esc to clear)" class="filter" />'
  document.body.insertBefore(node, container)

  var filterField = document.body.querySelectorAll('.filter')[0]

  filterField.addEventListener('input', function () {
    filterItems(filterField, titles)
  })

  filterField.addEventListener('keyup', function () {
    clearTimeout(timeout)

    timeout = setTimeout(function () {
      window.location.hash = encodeURIComponent(filterField.value)
    }, 1000)
  })

  document.body.addEventListener('keydown', function (keyPressed) {
    if (keyPressed.key === 'Escape' || keyPressed.key === 'Esc' || keyPressed.keyCode === 27) {
      keyPressed.preventDefault()
      window.location.hash = ''
      filterField.value = ''
      filterField.focus()
      filterItems(filterField, titles)
    }
  })

  filterField.focus()
  filterField.value = ''
  filterField.value = decodeURIComponent(window.location.hash.substr(1))

  filterItems(filterField, titles)
})
</script>
</body>
</html>
